/sp.specify

Build an Urdu translation system that allows logged-in users to translate any chapter into Urdu by clicking a button at the start of the chapter. This makes the course accessible to Urdu-speaking students in Pakistan and worldwide.

The translation should be high-quality using GPT-4, not just word-for-word machine translation. Technical terms should remain in English with Urdu explanations in parentheses (example: "Node Ù†ÙˆÚˆ (Ø§ÛŒÚ© Ù¾Ø±ÙˆÚ¯Ø±Ø§Ù… Ú©ÛŒ Ø§Ú©Ø§Ø¦ÛŒ)"). Code blocks should remain in English with Urdu comments. The translation should preserve the educational tone and clarity of the original content.

Urdu content must be displayed with proper right-to-left (RTL) text direction using the Noto Nastaliq Urdu font for authentic, readable Urdu typography. The layout should flip appropriately for RTL while keeping code blocks and diagrams in LTR.

Users should have a "Translate to Urdu" button at the top of each chapter. When clicked, the entire chapter content is translated and displayed in Urdu with proper RTL formatting. Users can toggle back to English easily. The system should remember the user's language preference and auto-translate future chapters if they prefer Urdu.

Like personalization, translations should be cached to avoid re-translating the same content. The system should handle mixed RTL/LTR content gracefully (Urdu text + English code blocks + English technical terms).



/sp.plan

Use the following technical architecture:

Backend API:
- POST /api/translate/chapter: Translate chapter to Urdu
- Input: chapter_url, user_id
- Process: Read original markdown, send to GPT-4 with translation prompt, return Urdu markdown
- Caching: Store Urdu versions in Neon Postgres (same caching strategy as personalization)

GPT-4 Translation Prompt Template:You are an expert Urdu translator specializing in technical and educational content. Translate this robotics textbook chapter from English to Urdu.
Translation Guidelines:

Technical Terms: Keep English terms with Urdu explanations in parentheses

Example: "Node Ù†ÙˆÚˆ (Ø§ÛŒÚ© Ù¾Ø±ÙˆÚ¯Ø±Ø§Ù… Ú©ÛŒ Ø§Ú©Ø§Ø¦ÛŒ Ø¬Ùˆ ROS 2 Ù…ÛŒÚº Ú†Ù„ØªÛŒ ÛÛ’)"
Example: "Publisher Ù¾Ø¨Ù„Ø´Ø± (Ù¾ÛŒØºØ§Ù… Ø¨Ú¾ÛŒØ¬Ù†Û’ ÙˆØ§Ù„Ø§)"


Code Blocks: Keep code in English but translate comments to Urdu

python   # ÛŒÛ Ø§ÛŒÚ© Ø³Ø§Ø¯Û Ù†ÙˆÚˆ ÛÛ’
   import rclpy
   from rclpy.node import Node
```

3. Maintain Structure: Keep all markdown headers, bullet points, formatting exactly as original

4. Educational Tone: Use clear, teaching-friendly Urdu. Avoid overly formal or complex vocabulary.

5. Preserve Meaning: Ensure technical accuracy - don't simplify concepts, just translate them clearly

Original Content:
{original_markdown_content}

Translate to Urdu now. Return ONLY markdown in Urdu (no preamble).
```

Frontend Components:
- TranslateButton: "Translate to Urdu" button at chapter top
- LanguageToggle: Switch between English and Urdu
- LanguageIndicator: Badge showing "Ø§Ø±Ø¯Ùˆ Ù…ÛŒÚº" (In Urdu)
- RTLWrapper: Component that handles RTL layout

Typography & Styling:
- Font: Noto Nastaliq Urdu (Google Fonts)
- CSS direction: rtl for Urdu content
- Text alignment: right for Urdu
- Code blocks: Keep LTR (direction: ltr) even in Urdu content
- Mixed content handling: Use unicode-bidi for inline English terms

CSS Implementation:
```css
.urdu-content {
  direction: rtl;
  text-align: right;
  font-family: 'Noto Nastaliq Urdu', serif;
  font-size: 18px; /* Urdu reads better slightly larger */
  line-height: 2; /* More spacing for Urdu */
}

.urdu-content code,
.urdu-content pre {
  direction: ltr;
  text-align: left;
  font-family: 'Courier New', monospace;
}

.urdu-content .english-term {
  direction: ltr;
  display: inline-block;
}
```

Storage Strategy:
- Urdu translations cached in Neon Postgres
- Key: chapter_url + "urdu"
- TTL: 30 days (longer than personalization since content doesn't change based on user)
- Shared across all users (not user-specific)

User Flow:
1. User navigates to chapter
2. If logged in, see "Translate to Urdu" button
3. Click button â†’ loading (10-15 seconds, longer than personalization due to more text)
4. Content displays in Urdu with RTL layout
5. Badge: "Ø§Ø±Ø¯Ùˆ Ù…ÛŒÚº" (In Urdu)
6. Toggle to switch back to English
7. Preference saved: auto-translate future chapters

Language Preference:
- Store in user_profiles: preferred_language (english | urdu)
- If preference is urdu, auto-translate on page load
- Show loading state while translating
- Fallback to English if translation fails

Performance Optimization:
- Pre-translate popular chapters
- Background translation: when user visits chapter, start translating next chapter
- Show progress: "Translating... 30%"
- Use streaming if possible for faster perceived performance

Cost Management:
- Estimate: ~2000-3000 tokens per chapter translation
- ~$0.06 per translation with GPT-4 Turbo
- Cache shared across all users
- One-time cost per chapter (subsequent users use cache)

Accessibility:
- Screen reader support for RTL content
- Proper lang="ur" attribute for Urdu sections
- Keyboard navigation works correctly in RTL
- Print layout handles RTL properly

Success Metrics:
- Translation completes in <15 seconds
- Urdu text is readable and accurate
- RTL layout works correctly
- Technical terms preserved appropriately
- Code blocks remain readable in LTR
```

---
/sp.tasks

Break down Urdu translation into tasks including GPT-4 translation prompt, RTL CSS styling, font integration, caching system, frontend translate button, and language preference management.
```

---

## ğŸ“ **Step 4: Implement**
```
/sp.implement

Execute all Urdu translation tasks. Start with backend translation endpoint, then add RTL styling and Noto Nastaliq Urdu font, create translate button, build language toggle, implement caching, and test thoroughly with Urdu content.

Use these subagents and skills:
- /subagent python-expert for translation API
- /skill fastapi-development for API endpoint
- /subagent react-developer for translate button and RTL layout
- /skill react-components for language toggle
- /subagent api-architect for caching strategy

Priority order:
1. Create translation API endpoint with GPT-4
2. Implement Urdu caching (shared across users)
3. Add Noto Nastaliq Urdu font to Docusaurus
4. Create RTL CSS styles
5. Build TranslateButton component
6. Build language toggle functionality
7. Add language preference to user profiles
8. Test with actual Urdu speakers for quality validation
9. Ensure code blocks and technical terms are handled correctly

Critical: Test RTL layout thoroughly - sidebars, navigation, code blocks, tables all need to work correctly in RTL mode.






